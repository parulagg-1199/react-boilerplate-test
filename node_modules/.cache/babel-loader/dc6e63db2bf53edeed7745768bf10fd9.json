{"ast":null,"code":"import _slicedToArray from \"/home/xs119-paragg/Downloads/boilerplate/react-boilerplate/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { PUT_API } from './symbols';\nimport { isValidJSON } from './index';\n\nfunction putApi(endpoint, body, authenticated) {\n  var config = {\n    method: 'PUT'\n  };\n\n  if (authenticated) {\n    var token = localStorage.getItem('token') || null;\n    config['headers'] = {\n      'Authorization': \"Bearer \".concat(token)\n    };\n  }\n\n  if (typeof body !== 'undefined') {\n    config['body'] = JSON.stringify(body);\n  }\n\n  return fetch(endpoint, config).then(function (response) {\n    if (response.status === 200) {\n      return response.text().then(function (data) {\n        return isValidJSON(data) ? {\n          data: JSON.parse(data),\n          status: response.status\n        } : {\n          data: {\n            error: true,\n            message: \"Error while parsing the json.\"\n          },\n          status: response.status\n        };\n      });\n    } else {\n      return response.json().then(function (data) {\n        return {\n          data: data,\n          status: response.status\n        };\n      });\n    }\n  }).catch(function (err) {\n    return {\n      data: {\n        error: true,\n        message: \"Internal Server Error\"\n      },\n      status: 500\n    };\n  });\n}\n/**\n * ,\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n */\n\n\nexport default (function (store) {\n  return function (next) {\n    return function (action) {\n      var putApiDetails = action[PUT_API];\n\n      if (typeof putApiDetails === 'undefined') {\n        return next(action);\n      }\n\n      var endpoint = putApiDetails.endpoint,\n          types = putApiDetails.types,\n          body = putApiDetails.body,\n          authenticated = putApiDetails.authenticated;\n\n      var _types = _slicedToArray(types, 3),\n          requestType = _types[0],\n          successType = _types[1],\n          errorType = _types[2];\n\n      return next({\n        type: requestType\n      }), putApi(endpoint, body, authenticated).then(function (response) {\n        if (response.status === 200) {\n          return next({\n            response: response,\n            type: successType\n          });\n        } else {\n          return next({\n            response: response,\n            type: errorType\n          });\n        }\n      });\n    };\n  };\n});","map":{"version":3,"sources":["/home/xs119-paragg/Downloads/boilerplate/react-boilerplate/src/middleware/put-api.js"],"names":["PUT_API","isValidJSON","putApi","endpoint","body","authenticated","config","method","token","localStorage","getItem","JSON","stringify","fetch","then","response","status","text","data","parse","error","message","json","catch","err","store","next","action","putApiDetails","types","requestType","successType","errorType","type"],"mappings":"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","sourcesContent":["import { PUT_API } from './symbols'\n\nimport { isValidJSON } from './index'\n\nfunction putApi(endpoint, body, authenticated) {\n    let config = {\n        method: 'PUT'\n    }\n\n    if (authenticated) {\n        const token = localStorage.getItem('token') || null;\n        config['headers'] = {\n                'Authorization': `Bearer ${token}`\n            }\n    }\n\n    if(typeof body !== 'undefined') {\n        config['body'] = JSON.stringify(body)\n    }\n\n    return fetch(endpoint, config).then(\n        response => {\n            if (response.status === 200) {\n                return response.text().then(data => {\n                    return isValidJSON(data) ? ({data: JSON.parse(data), status: response.status}) : ({\n                        data: {\n                            error: true,\n                            message: \"Error while parsing the json.\"\n                        }, status: response.status\n                    })\n                })\n            } else {\n                return response.json().then(data =>\n                    ({data, status: response.status})\n                )\n            }\n        }\n    )\n    .catch(err => ({data: {error: true, message: \"Internal Server Error\"}, status: 500}));\n\n}\n\n/**\n * ,\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n */\n\nexport default store => next => action => {\n    const putApiDetails = action[PUT_API];\n    if (typeof putApiDetails === 'undefined') {\n        return next(action)\n    }\n\n    let {endpoint, types, body, authenticated} = putApiDetails;\n    const [requestType, successType, errorType] = types;\n\n    return (\n        next({type: requestType}),\n        putApi(endpoint, body, authenticated).then(\n            response => {\n                if (response.status === 200) {\n                    return next({\n                        response,\n                        type: successType\n                    })\n                } else {\n                    return next({\n                        response,\n                        type: errorType\n                    })\n                }\n            }\n        )\n    )\n}"]},"metadata":{},"sourceType":"module"}